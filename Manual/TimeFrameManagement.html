<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="重要的类 - 时间和帧率管理 - Unity 手册">
<title>重要的类 - 时间和帧率管理 - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/2020.3/uploads/Main/time-flowchart.png">
<meta name="description" content="Unity 的 Time 类提供许多重要的基本属性，允许您在项目中使用与时间相关的值。">
<meta property="og:description" content="Unity 的 Time 类提供许多重要的基本属性，允许您在项目中使用与时间相关的值。">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
        function OptanonWrapper() { }
    </script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'TimeFrameManagement';
      if(!page) page = 'index';
      var version = '2020.3';
      var docs_versions = [{version: '2021.2',version_string: '2021.2',supported: true},{version: '2021.1',version_string: '2021.1',supported: true},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: true},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2020.3/Manual/TimeFrameManagement.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2020.3/Manual/TimeFrameManagement.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2020.3/Manual/TimeFrameManagement.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2020.3/Manual/TimeFrameManagement.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2020.3/Manual/TimeFrameManagement.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2020.3/Manual/TimeFrameManagement.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/2020.3/Manual/TimeFrameManagement.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/2020.3/Documentation/Manual/TimeFrameManagement.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2020.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/TimeFrameManagement.html">2021.2</a></li>
<li class="supported"><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/TimeFrameManagement.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/TimeFrameManagement.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/TimeFrameManagement.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/TimeFrameManagement.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/TimeFrameManagement.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/TimeFrameManagement.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/TimeFrameManagement.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/TimeFrameManagement.html">2019.1</a></li>
<li class="supported"><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/TimeFrameManagement.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/TimeFrameManagement.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/TimeFrameManagement.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/TimeFrameManagement.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/TimeFrameManagement.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/TimeFrameManagement.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/TimeFrameManagement.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/TimeFrameManagement.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/TimeFrameManagement.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2020.3/Documentation/Manual/TimeFrameManagement.html">English</a></li>
<li><a data-lang="cn" href="/cn/2020.3/Manual/TimeFrameManagement.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2020.3/Manual/TimeFrameManagement.html">日本語</a></li>
<li><a data-lang="es" href="/es/2020.3/Manual/TimeFrameManagement.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2020.3/Manual/TimeFrameManagement.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/2020.3/Manual/TimeFrameManagement.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2020.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/TimeFrameManagement.html">2021.2</a></li>
<li class="supported"><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/TimeFrameManagement.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/TimeFrameManagement.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/TimeFrameManagement.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/TimeFrameManagement.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/TimeFrameManagement.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/TimeFrameManagement.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/TimeFrameManagement.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/TimeFrameManagement.html">2019.1</a></li>
<li class="supported"><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/TimeFrameManagement.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/TimeFrameManagement.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/TimeFrameManagement.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/TimeFrameManagement.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/TimeFrameManagement.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/TimeFrameManagement.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/TimeFrameManagement.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/TimeFrameManagement.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/TimeFrameManagement.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity 用户手册 2020.3 (LTS)</a></li>
<li><a href="ScriptingSection.html">脚本</a></li>
<li><a href="ScriptingImportantClasses.html">重要的类</a></li>
<li>重要的类 - 时间和帧率管理</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="class-ScriptableObject.html"></a></span><div class="tip">ScriptableObject</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="class-Mathf.html"></a></span><div class="tip">重要的类 - Mathf</div>
</div>
</div></div>
<h1>重要的类 - 时间和帧率管理</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<h2>Time 类</h2>

<p>Unity 的 Time 类提供许多重要的基本属性，允许您在项目中使用与时间相关的值。</p>

<p><a href="../ScriptReference/Time.html">时间脚本参考页面</a>每个成员的描述是不言自明的，这是了解它们的最佳场所。</p>

<p>这里列出了一小部分示例，以提供常见和典型用途的概念：</p>

<p><a href="../ScriptReference/Time-time.html"><code>Time.time</code></a> returns the amount of time since your project started playing.</p>

<p><a href="../ScriptReference/Time-deltaTime.html"><code>Time.deltaTime</code></a> returns the amount of time that elapsed since the last frame completed.</p>

<p><a href="../ScriptReference/Time-timeScale.html"><code>Time.timeScale</code></a> represents the rate at which time elapses. You can read this value, or set it to control how fast time passes, allowing you to create slow-motion effects.</p>

<p>有关时间相关属性的完整列表，请参阅<a href="../ScriptReference/Time.html">时间脚本参考页面</a>。</p>

<p>借助 <a href="../ScriptReference/MonoBehaviour.Update.html">Update</a> 函数，可定期通过脚本监控输入和其他事件，并采取适当的操作。例如，可在按下“forward”键时移动一个角色。在处理这种基于时间的动作时要记住的一项重要规则是，游戏的帧率不是恒定的，并且 Update 函数调用之间的时间长度也不是恒定的。</p>

<p>举例来说，假设在一项任务中需要逐步向前移动某个对象，一次一帧。起初看起来好像可以在每帧将对象移动一个固定距离：</p>

<pre><code>//C# script example
using UnityEngine;
using System.Collections;

public class ExampleScript : MonoBehaviour {
    public float distancePerFrame;
    
    void Update() {
        transform.Translate(0, 0, distancePerFrame); // this is incorrect
    }
}
</code></pre>

<p>但是，如果帧时间不是恒定的，那么对象看起来会以不规则的速度移动。如果帧时间为 10 毫秒，那么对象将以 <em>distancePerFrame</em> 的距离每秒前进一百次。但如果帧时间增加到 25 毫秒（比如由于 CPU 负载的原因），那么对象每秒只会前进四十次，因此移动的总距离更短。解决方案是通过可从 <a href="../ScriptReference/Time-deltaTime.html">Time.deltaTime</a> 属性读取的帧时间来缩放移动距离大小：</p>

<pre><code>//C# 脚本示例
using UnityEngine;
using System.Collections;

public class ExampleScript : MonoBehaviour {
    public float distancePerSecond;
    
    void Update() {
        transform.Translate(0, 0, distancePerSecond * Time.deltaTime);
    }
}
</code></pre>

<p>请注意，此移动距离现在为 <em>distancePerSecond</em> 而不是 <em>distancePerFrame</em>。随着帧率的变化，移动步长大小也会相应改变，因此对象的速度将保持不变。</p>

<h2>Fixed Timestep (fixedDeltaTime)</h2>

<p>Unlike the main frame update, Unity’s physics system <em>does</em> work to a fixed timestep, which is important for the accuracy and consistency of the simulation. At the start of the physics update, Unity performs as many physics updates as necessary to catch up with the current time.</p>

<p>If your game or app is running at a <em>higher framerate</em> than the fixed timestep value, it means each frame is less than the duration of a single fixed timesetp, so Unity will either perform one or zero fixed physics updates per frame. For example, if your fixed timestep value is 0.02, there should be 50 fixed updates per second. If your game or app then runs at approximately 60 frames per second, there will occasionally be a frame where no fixed update occurs - in approximately one in ten frames.</p>

<p>If your game or app is running at a <em>lower framerate</em> than the fixed timestep value, it means each frame duration is longer than a single fixed timesetp. To account for this, Unity will perform one or more fixed updates each frame, so that the physics simulation “catches up” with the amount of time elapsed since the last frame. For example, if your fixed timestep value is 0.01, there should be 100 fixed updates per second. If your game or app then runs at approximately 25 frames per second, Unity will perform approximately four fixed updates every frame to keep the physics simulation time up-to-date with the current frame time.</p>

<p>You can change the duration of the fixed timestep in the <a href="class-TimeManager.html">Time</a> window, and you can read it from a script using the <a href="../ScriptReference/Time-fixedDeltaTime.html">Time.fixedDeltaTime</a> property. Note that a lower value for the timestep will result in more frequent physics updates and more precise simulation but at the cost of greater CPU load. You probably won’t need to change the default fixed timestep unless you are placing high demands on the physics engine that require extra high precision.</p>

<h2>Unity’s Time Logic</h2>

<p>The following flowchart illustrates the logic that Unity uses to count time in a single frame, and how the <a href="../ScriptReference/Time-time.html">time</a>, <a href="../ScriptReference/Time-deltaTime.html">deltaTime</a>, <a href="../ScriptReference/Time-fixedDeltaTime.html">fixedDeltaTime</a>, and <a href="../ScriptReference/Time-maximumDeltaTime.html">maximumDeltaTime</a> properties relate to each other.</p>

<figure>
<img src="../uploads/Main/time-flowchart.png" alt="">
</figure>

<p><a name="MaximumAllowedTimestep"></a></p>

<h2>Maximum Allowed Timestep (maximumDeltaTime)</h2>

<p>When a very slow frame occurs, The <strong>Maximum Allowed Timestep</strong> (in the <a href="class-TimeManager.html">Time</a> window) limits the value of deltaTime in the following frame to avoid undesirable side-effects from very large deltaTime values. This value is also accessible via scripting as <a href="../ScriptReference/Time-maximumDeltaTime.html">Time.maximumDeltaTime</a>.</p>

<p>For example, an application running at 60Hz with a maximumDeltaTime value of 0.333 that encounters a single very slow frame (2 seconds) would exhibit a behavior similar to that shown in the following table:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Frame</th>
	<th style="text-align:left;">unscaledTime</th>
	<th style="text-align:left;">time</th>
	<th style="text-align:left;">deltaTime</th>
	<th style="text-align:left;">smoothDeltaTime</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"></td>
	<td style="text-align:left;">1</td>
	<td style="text-align:left;">0.000</td>
	<td style="text-align:left;">3.000</td>
	<td style="text-align:left;">0.014</td>
	<td style="text-align:left;">0.014</td>
</tr>
<tr>
	<td style="text-align:left;"></td>
	<td style="text-align:left;">2</td>
	<td style="text-align:left;">0.014</td>
	<td style="text-align:left;">3.015</td>
	<td style="text-align:left;">0.014</td>
	<td style="text-align:left;">0.014</td>
</tr>
<tr>
	<td style="text-align:left;"></td>
	<td style="text-align:left;">3</td>
	<td style="text-align:left;">0.028</td>
	<td style="text-align:left;">3.028</td>
	<td style="text-align:left;">0.014</td>
	<td style="text-align:left;">0.014</td>
</tr>
<tr>
	<td style="text-align:left;"></td>
	<td style="text-align:left;">4 (<strong>a</strong>)</td>
	<td style="text-align:left;">0.042</td>
	<td style="text-align:left;">3.043</td>
	<td style="text-align:left;">0.014</td>
	<td style="text-align:left;">0.014</td>
</tr>
<tr>
	<td style="text-align:left;"></td>
	<td style="text-align:left;">5</td>
	<td style="text-align:left;">2.062 (<strong>b</strong>)</td>
	<td style="text-align:left;">3.376 (<strong>c</strong>)</td>
	<td style="text-align:left;">0.333 (<strong>d</strong>)</td>
	<td style="text-align:left;">0.078</td>
</tr>
<tr>
	<td style="text-align:left;"></td>
	<td style="text-align:left;">6</td>
	<td style="text-align:left;">2.082</td>
	<td style="text-align:left;">3.396</td>
	<td style="text-align:left;">0.020</td>
	<td style="text-align:left;">0.066</td>
</tr>
<tr>
	<td style="text-align:left;"></td>
	<td style="text-align:left;">7</td>
	<td style="text-align:left;">2.096</td>
	<td style="text-align:left;">3.410</td>
	<td style="text-align:left;">0.014</td>
	<td style="text-align:left;">0.056</td>
</tr>
<tr>
	<td style="text-align:left;"></td>
	<td style="text-align:left;">8</td>
	<td style="text-align:left;">2.110</td>
	<td style="text-align:left;">3.424</td>
	<td style="text-align:left;">0.014</td>
	<td style="text-align:left;">0.048</td>
</tr>
</tbody>
</table>

<p>The data above illustrates the effect of the maximum allowed timestep value (the <a href="../ScriptReference/Time-maximumDeltaTime.html">maximumDeltaTime</a>). It shows eight frames, numbered one to eight. During frame four in this example (<strong>a</strong>), there is a slow-down which causes the frame to take two seconds to complete, rather than around 25 milliseconds like the others. The effects of this are reflected in the values on the following frame. The pause is visible as increment of around 2 in the unscaledTime value (<strong>b</strong>), however the Time.time value only increments by 0.333 (<strong>c</strong>), because that is the value of maximum allowed timestep when this example was running. The deltaTime value for this frame is also clamped to the maximum allowed timestep (<strong>d</strong>).</p>

<p>The maximum allowed timestep value also affects the physics timekeeping. The <strong>fixed timestep</strong> keeps the physical simulation accurate in real time but it can cause problems in cases where the game makes heavy use of physics and the gameplay frame rate has also become low, for example due to a large number of objects in motion. The main frame update processing has to be “squeezed” in between the regular physics updates, and if there is a lot of processing to do then several physics updates might need to take place during a single frame to catch the physics simulation up with the current time. Since the frame time, positions of objects and other properties are frozen at the start of the frame, the graphics can get out of sync with the more frequently updated physics.</p>

<p>Limited CPU power means there is a limit to what the physics system can process, so Unity has an option to let you effectively slow down physics time to let the frame processing catch up if it falls behind. The maximum allowed timestep puts a limit on the amount of time Unity will spend processing physics and FixedUpdate calls during a given frame update.</p>

<p>If a frame update takes longer than <strong>Maximum Allowed Timestep</strong> to process, the physics engine will “stop time” and let the frame processing catch up. Once the frame update has finished, the physics resumes as though no time has passed since it was stopped. The result of this is that rigidbodies will not move perfectly in real time as they usually do but will be slowed slightly. However, the physics “clock” will still track them as though they were moving normally. The slowing of physics time is usually not noticeable and is often an acceptable trade-off against gameplay performance.</p>

<h2>时间尺度</h2>

<p>对于特殊效果，例如“子弹时间”，有时减慢游戏时间的流逝会很有用，能够使动画和脚本响应以较低的速率发生。此外，有时可能希望完全冻结游戏时间，就像游戏暂停时一样。Unity 有一个 <em>Time Scale</em> 属性可以控制游戏时间相对于实时时间的进展速度。如果该标度设置为 1.0，则游戏时间与实时时间匹配。值为 2.0 会使 Unity 中的时间流逝速度加倍（即，动作将加速），而值为 0.5 则会将游戏速度减半。值为零将使时间完全“停止”。请注意，时间标度实际上并不会降低执行速度，而只是更改了通过 <a href="../ScriptReference/Time-deltaTime.html">Time.deltaTime</a> 和 <a href="../ScriptReference/Time-fixedDeltaTime.html">Time.fixedDeltaTime</a> 报告给 Update 和 FixedUpdate 函数的时间步长。当游戏时间减慢时，调用 Update 函数的频率可能高于平常，但每帧报告的 <em>deltaTime</em> 步长将会缩短。其他脚本函数不受时间标度的影响，因此您可以在游戏暂停时显示具有正常交互的 GUI。</p>

<p><a href="class-TimeManager.html">Time</a> 窗口有一个属性可用于全局设置时间标度，但使用 <a href="../ScriptReference/Time-timeScale.html">Time.timeScale</a> 属性从脚本设置该值通常更有用：</p>

<pre><code>//C# 脚本示例
using UnityEngine;
using System.Collections;

public class ExampleScript : MonoBehaviour {
    void Pause() {
        Time.timeScale = 0;
    }
    
    void Resume() {
        Time.timeScale = 1;
    }
}
</code></pre>

<h2>Capture Framerate</h2>

<p>一个非常特殊的时间管理案例是您希望将游戏过程录制为视频。由于保存屏幕图像的任务需要相当长的时间，因此如果在正常游戏过程中尝试执行此操作，则游戏的常规帧率将大幅降低。这将导致视频无法反映游戏的真实性能。</p>

<p>幸运的是，Unity 提供了一个 <a href="../ScriptReference/Time-captureFramerate.html">Capture Framerate</a> 属性可用于解决该问题。该属性的值设置为零以外的任何值时，游戏时间将减慢，而帧更新将以精确的定期时间间隔发出。帧之间的时间间隔等于 1 / Time.captureFramerate，因此如果该值设置为 5.0，则每五分之一秒更新一次。随着对帧率的要求有效降低，在 Update 函数中便有了时间保存截屏或采取其他操作：</p>

<pre><code>//C# 脚本示例
using UnityEngine;
using System.Collections;

public class ExampleScript : MonoBehaviour {
    // 捕获帧作为截屏序列。图像
    //以 PNG 文件的形式存储在文件夹中 - 这些可以
    //使用图像实用程序软件（例如 QuickTime Pro）组合成电影。
    // 该文件夹将包含我们的截屏。
    // 如果该文件夹存在，我们将附加数字来创建一个空文件夹。
    string folder = "ScreenshotFolder";
    int frameRate = 25;
        
    void Start () {
        // 设置回放帧率（实时时间将与此后的游戏时间不相关）。
        Time.captureFramerate = frameRate;
        
        // 创建文件夹
        System.IO.Directory.CreateDirectory(folder);
    }
    
    void Update () {
        // 将文件名附加到文件夹名（格式为"0005 shot.png""）
        string name = string.Format("{0}/{1:D04} shot.png", folder, Time.frameCount );
        
        // 将截屏捕获到指定的文件。
        Application.CaptureScreenshot(name);
    }
}
</code></pre>

<p>尽管使用这种技术录制的视频通常看起来非常好，但是当速度减慢时，游戏很难运行。您可能需要尝试使用 Time.captureFramerate 的值来确保充足的录制时间，但不会过度复杂化测试播放器的任务。</p>
<!-- area:core -->
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="class-ScriptableObject.html"></a></span><div class="tip">ScriptableObject</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="class-Mathf.html"></a></span><div class="tip">重要的类 - Mathf</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2021 Unity Technologies. Publication 2020.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
